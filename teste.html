<style>
  /* Container principal com 5x5 grid */
  .parent {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 colunas iguais */
    grid-template-rows: repeat(5, 1fr); /* 5 linhas iguais */
    grid-column-gap: 10px; /* Espaçamento entre as colunas */
    grid-row-gap: 20px; /* Espaçamento entre as linhas */
    height: 100%; /* Garante que a altura se ajustará à tela */
  }

  /* Formulário Adicionar Evento (1ª coluna) */
  .div1 {
    grid-area: 1 / 1 / 6 / 2; /* Primeira coluna (1 a 6) */
    background-color: #00FFAB;
    padding: 15px; /* Ajuste do padding */
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .div1 h3 {
    font-size: 1.1em;
    color: #333;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 6px; /* Reduzir gap */
  }

  .form-group label {
    font-weight: bold;
    color: #333;
    font-size: 0.9em; /* Reduzir o tamanho da fonte */
  }

  .form-group input, .form-group select, .form-group textarea {
    width: 100%;
    padding: 6px; /* Ajuste do padding */
    font-size: 0.8em; /* Reduzir o tamanho da fonte */
    border-radius: 5px;
    border: 1px solid #ccc;
  }

  /* Calendário (2ª coluna) */
  .div2 {
    grid-area: 1 / 2 / 3 / 3; /* 1 a 3 na segunda coluna */
    background-color: #FFFFFF;
    border: 1px solid #ddd;
    padding: 10px; /* Ajuste do padding */
    border-radius: 8px;
  }

  /* Eventos do Dia (3ª coluna) */
  .div3 {
    grid-area: 3 / 2 / 6 / 3; /* 3 a 6 na terceira coluna */
    background-color: #f9f9f9;
    padding: 10px; /* Reduzir o padding */
    border-radius: 8px;
    height: 100%; /* Garantir que ocupe a altura total disponível */
  }

  /* Responsividade */
  @media screen and (max-width: 768px) {
    .parent {
      grid-template-columns: 1fr; /* Em telas menores, o layout será de 1 coluna */
    }

    .div1 {
      width: 100%;
      padding: 10px;
    }

    .form-group input, .form-group select, .form-group textarea {
      font-size: 0.8em;
      padding: 6px;
    }

    .form-actions button {
      width: 100%;
      margin-top: 8px;
    }
  }
</style>

<!-- Estrutura principal -->
<div class="parent">
  <!-- Formulário Adicionar Evento -->
  <div class="div1">
    <form id="event-form" method="POST">
      <h3><i class="fas fa-plus-circle"></i> Adicionar Evento</h3>
      <input type="hidden" name="action" id="form-action" value="add_event">
      <input type="hidden" name="event_id" id="event-id">
      <input type="hidden" name="csrf_token" value="<?= $_SESSION['csrf_token'] ?>">

      <!-- Título -->
      <div class="form-group">
        <label for="titulo">Título</label>
        <input type="text" name="titulo" id="titulo" required aria-required="true">
      </div>

      <!-- Descrição -->
      <div class="form-group">
        <label for="descricao">Descrição</label>
        <textarea name="descricao" id="descricao" aria-describedby="desc-help"></textarea>
      </div>

      <!-- Data -->
      <div class="form-group input-with-icon">
        <label for="data">Data</label>
        <input type="date" name="data" id="data" required aria-required="true" value="<?= sprintf("%04d-%02d-%02d", $currentYear, $currentMonth, $selectedDay) ?>">
        <i class="fas fa-calendar-alt"></i>
      </div>

      <!-- Tempo -->
      <div class="form-group input-with-icon">
        <label for="hora">Tempo</label>
        <input type="time" name="hora" id="hora" required aria-required="true">
        <i class="fas fa-clock"></i>
      </div>

      <!-- Categoria -->
      <div class="form-group">
        <label for="categoria">Categoria</label>
        <select name="categoria" id="categoria" required aria-required="true">
          <?php foreach ($categories as $key => $label): ?>
            <option value="<?= htmlspecialchars($key) ?>"><?= htmlspecialchars($label) ?></option>
          <?php endforeach; ?>
        </select>
      </div>

      <!-- Cor -->
      <div class="form-group">
        <label for="cor">Cor</label>
        <input type="color" name="cor" id="cor" value="#ff0000" required aria-required="true">
      </div>

      <!-- Enviar por e-mail -->
      <div class="form-group">
        <label>
          <input type="checkbox" name="enviar_email" id="enviar-email">
          Enviar por e-mail
        </label>
      </div>

      <!-- E-mail do destinatário -->
      <div class="form-group" id="email-field">
        <label for="email_destinatario">E-mail do Destinatário</label>
        <select name="email_destinatario" id="email-destinatario">
          <option value="">Selecione ou digite um e-mail</option>
          <?php foreach ($savedEmails as $email): ?>
            <option value="<?= htmlspecialchars($email) ?>"><?= htmlspecialchars($email) ?></option>
          <?php endforeach; ?>
        </select>
        <input type="email" name="email_destinatario" id="email-destinatario-input" placeholder="Digite o e-mail">
      </div>

      <!-- Salvar e-mail para eventos futuros -->
      <div class="form-group" id="salvar-email-field">
        <label>
          <input type="checkbox" name="salvar_email" id="salvar-email">
          Salvar este e-mail para eventos futuros
        </label>
      </div>

      <!-- Botões de Ação -->
      <div class="form-actions">
        <button type="submit" id="submit-btn"><i class="fas fa-check-circle"></i> Adicionar Evento</button>
        <button type="button" class="cancel-btn" id="cancel-btn" style="display: none;">Cancelar</button>
      </div>
    </form>
  </div>

  <!-- Calendário -->
  <div class="div2">
    <div class="calendar-header">
      <button id="prev-month" data-url="<?= $navigation['prevMonthLink'] ?>" aria-label="Mês anterior">
        <i class="fas fa-arrow-left"></i> Anterior
      </button>
      <h2 id="month-year" aria-live="polite"><?= date("F Y", strtotime("$currentYear-$currentMonth-01")) ?></h2>
      <button id="next-month" data-url="<?= $navigation['nextMonthLink'] ?>" aria-label="Próximo mês">
        Próximo <i class="fas fa-arrow-right"></i>
      </button>
    </div>
    <?= gerarCalendario($currentMonth, $currentYear, $eventos, $selectedDay); ?>
  </div>

  <!-- Eventos do Dia -->
  <div class="div3">
    <h3>Eventos do Dia <?= sprintf("%02d/%02d/%04d", $selectedDay, $currentMonth, $currentYear) ?></h3>
    <?php if (empty($dailyEvents)): ?>
      <p>Nenhum evento para este dia.</p>
    <?php else: ?>
      <?php foreach ($dailyEvents as $event): ?>
        <div class="daily-event">
          <div class="event-color-bar" style="background-color: <?= htmlspecialchars($event['cor']) ?>;"></div>
          <div class="daily-event-content">
            <div class="daily-event-info">
              <strong><?= htmlspecialchars($event['titulo']) ?></strong>
              <small>das <?= htmlspecialchars($event['hora']) ?></small>
            </div>
            <div class="daily-event-menu">
              <i class="fas fa-bars menu-icon"></i>
              <div class="dropdown-menu">
                <a href="#" class="edit-link" data-id="<?= $event['id'] ?>"><i class="fas fa-edit"></i> Editar</a>
                <a href="#" class="delete-link" data-id="<?= $event['id'] ?>"><i class="fas fa-trash"></i> Excluir</a>
              </div>
            </div>
          </div>
        </div>
      <?php endforeach; ?>
    <?php endif; ?>
  </div>
</div>
